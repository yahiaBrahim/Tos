Version 0.1.5 ,
This document is Quick Guide if you are new to using TestOs


0-What is TestOS:
--------------------------------------------------------------------------------
Test Os kernel is an open source project, founded to provide an educational and research Kernel. It's designed to be a tiny and very simple kernel with small parts that can be used independently as parts of other kernels. Students can easily read the kernel source and understand it because it contains only the necessary parts of a real kernel, and thus students and researchers can easily use it in their projects. TOS was originally created for educational and research purposes but it can be easily ported to be used as a kernel for embedded systems.
This program is free software; you can redistribute it and/or modify it under the terms of GNU General Public License (GPL). 



1-How to use TestOS:
-------------------
The following steps show you a summary of how you can compile and use TestOS,
please type the following commands in a shell while you are in the TestOS folder
and as root,

0- You need to install prerequisits
	* qemu
	To do so, type :
	sudo apt-get install qemu
	
1- Initialization : 
	sudo make install 
	this will create the folder  /mnt/tos_floppy
	
2- Compile and run TestOS
	sudo make ct
	this will mount, compile, unmount and then run qemu the compiled testOS image
	



II-More d√©tails about Compiling and using TestOS:
--------------------------------------------------------------------------------
II-1-How to try quickly TestOs ?
---------------------------------
 - you can a use a virtual machine (Vmware , Bochs, qemu...) to boot from the Floppy image  "TestOS.img"


II-2-How to mount the Floppy file image "TestOS.img"?
-----------------------------------------------------
Under Linux, as root :
- You can try the default way to mount the floppy, (but it doesn't work always)
	* login as root (you can use the command su)
	* type  make install
OR
- You can do it manually
# sudo losetup -f  
  To get the name of the avalable loop, (let's say this command returns loopX as free)
# sudo losetup /dev/loopx TestOS.img
# sudo mount -t vfat /dev/loopX  /mnt/tos_floppy



II-3-How to Compile TestOs ?
----------------------------
we are using a MakeFile to make it easy for you to compile the TestOs kernel :
 - mount the floppy image  "TestOS.img" on     "/mnt/tos_floppy" as it's mentioned above,
 - on any unix or linux system you can type :  make,  this will compile the kernel into 2 main files:
		- ./boot/bootsect
		- ./kern/kernel.o
    these 2 files are copied to the floppy image 
    (the first file is writen on the first sector of the floppy) , 
    so you have now a floppy image "TestOS.img",
    (for some distributions you need to install the make utility itself,
    you need also the gcc compiler and a linker for exemple  ld)
   
   
II-4-Run TestOS on virtual machine :
------------------------------------
You can use Bochs OR VMware to run TestOS and test it, bochs supports well debuging, 
TOS is well tested on VMware so it's the best way to use it, if you want to 
participate with us as a developper you need to work with bochs also, (for debuging). 

HowTo:
-Download and install "VMware workstation" 6.0 or above, VMware player is a free 
version of VMware worksation but you could have problems with it, you can download 
both of them from : www.vmware.com
-IF you are using VMware Workstation :
	- open the "TOS.vmx" file located in "vm_tos/v_tos/" folder.
	- you have to specify the floppy image you want to use to boot the system, 
	this is typically the file :
		TestOS.img,  located in the TestOS folder, you can use this image 
		file (our compilation) or 
		you can recompile it, if you modified it;
-It may ask you the first time you run TOS, if you copied the TOS or you moved it, 
click on "Copied it"
-If VMware shows an error message : "floppy not found", then it didn't find the 
boot floppy, go to edit machine and choose floppy, then put the right floppy image path.
-IF you are using VMware player you may have problems only with the image file, 
because it's path is indicated in the original macine by : "../TestOS.img", so 
if it doesn't find the image there it will show you an error.



********************************************************************************
III- TestOS folders:
--------------------------------------------------------------------------------
1- boot/   	   : contains boot files : "bootsect" that file is writen on the first sector of the disk (or the floppy), this is the first file loaded, this file (the boot program) will look for the kernel entry (file "kernel.tos") in the     kern/   folder) and load it to memory.
2- Documentation/  : contains an HTML documentation, a description for all the functions and variables used in the kernel files, this documentation is generated by Doxygen.
3- console/        : console.c=contains the console itself, consoleFunctions.c=contains all the functions that are called from the console by a command.
4- File_sys/ 	   : the file system (fat12) structure and read & write functions.
5- snapshots/	   : contains some screen shots for the Tos kernel , it contains also a video for the Tos.
6- include/	   :
7- kern/	   :
8- libc/	   : contains c library files such as "string.h","stdlib.h","stdio.h","math.c",etc. you should use these functions instead of using the functions of the classic C library, for exemple you mustn't use  the default "printf()" that comes with you linux which needs to make some system calls in order to work but you have to use the printf() that comes with Tos (or any other valid one) that doesn't need to perform a linux or windows system call,




********************************************************************************
IV- Known Problems:
--------------------------------------------------------------------------------
1- After compiling the kernel and before using the floppy image you have to unmount it
and then detach it and then use it, otherwise all recent changes will not take effect
umount /mnt/tos_floppy
losetup -d /dev/loop7
then use theimage TestOS.img by qemu or Vmware or bochs
do not use it when it's still mounted



********************************************************************************
Kernel Designers and Main Developpers:
--------------------------------------------------------------------------------
- Djekidel Nadhir : Central South University, Changsha, China, altctrlsup@yahoo.com 
- Baghdadi Riyadh : Ecole National Superieur d'Informatique (ENSI) (High school of Computer Science)
  		    ex INI (Institut National d'informatique)


Developpers:
------------
- /


Testers:
--------
- /


Thanks To:
----------
- Every who helped us, suggested some thing, tested TestOS (Including you, because you are reading this)!
